<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>iLiFE! Live Signal</title>
    <meta
      name="description"
      content="iLiFE!の活動情報を、公式ニュースとX投稿からまとめて表示する非公式リアルタイムダッシュボード。"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Zen+Kaku+Gothic+New:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="bg-orb bg-orb-a"></div>
    <div class="bg-orb bg-orb-b"></div>

    <main class="page">
      <header class="hero reveal">
        <p class="hero-kicker">UNOFFICIAL LIVE TRACKER</p>
        <h1 class="hero-title">iLiFE! Live Signal</h1>
        <p class="hero-subtitle">
          HEROINES公式NEWSとX投稿を統合し、iLiFE出演公演や関連イベントを時系列で確認できます。
        </p>

        <div class="hero-toolbar">
          <button id="refreshButton" class="btn btn-primary" type="button">今すぐ更新</button>
          <label class="switch">
            <input id="autoRefresh" type="checkbox" checked />
            <span>5分ごとに自動更新</span>
          </label>
          <p id="lastUpdated" class="last-updated">読み込み中...</p>
        </div>
      </header>

      <section id="errorBanner" class="error-banner" hidden></section>

      <section class="stats reveal">
        <article class="stat-card">
          <p class="stat-label">次の公演</p>
          <p id="nextConcertValue" class="stat-value">-</p>
        </article>
        <article class="stat-card">
          <p class="stat-label">X投稿</p>
          <p id="xCountValue" class="stat-value">-</p>
        </article>
        <article class="stat-card">
          <p class="stat-label">取得状態</p>
          <p id="sourceStateValue" class="stat-value">-</p>
        </article>
      </section>

      <section class="panel reveal">
        <div class="panel-head">
          <h2>Event Calendar</h2>
          <p>直近から先の公演予定を月カレンダーで表示</p>
        </div>
        <div class="calendar-shell">
          <div class="calendar-toolbar">
            <button id="calendarPrevButton" class="btn btn-ghost" type="button" aria-label="前の月">
              ← 前月
            </button>
            <p id="calendarMonthLabel" class="calendar-month-label">-</p>
            <button id="calendarNextButton" class="btn btn-ghost" type="button" aria-label="次の月">
              次月 →
            </button>
          </div>
          <div class="calendar-weekdays">
            <span>日</span>
            <span>月</span>
            <span>火</span>
            <span>水</span>
            <span>木</span>
            <span>金</span>
            <span>土</span>
          </div>
          <div id="calendarGrid" class="calendar-grid"></div>
          <div id="calendarEventList" class="calendar-event-list"></div>
        </div>
      </section>

      <section class="panel reveal">
        <div class="panel-head">
          <h2>Upcoming Concerts</h2>
          <p>iLiFE単独に限定せず、HEROINES関連の公演告知も含めて抽出</p>
        </div>
        <div id="concertList" class="grid-list"></div>
      </section>

      <section class="panel reveal">
        <div class="panel-head">
          <h2>X Recent Posts</h2>
          <p>公式アカウントの直近投稿（ミラー経由）</p>
        </div>
        <div id="xPostList" class="stack-list"></div>
      </section>

      <section class="panel reveal">
        <div class="panel-head">
          <h2>Members X Focus</h2>
          <p>iLiFE / のんふぃく のメンバー最新X投稿を切り替え表示</p>
        </div>
        <div class="member-tabs" role="tablist" aria-label="Member groups">
          <button type="button" class="member-tab is-active" data-member-group="ilife" data-member-label="iLiFE">
            iLiFE
          </button>
          <button type="button" class="member-tab" data-member-group="nonfic" data-member-label="のんふぃく">
            のんふぃく
          </button>
        </div>
        <p id="memberGroupCaption" class="member-group-caption">iLiFEメンバーごとの最新X投稿（各1件）</p>
        <div class="member-table-wrap">
          <table class="member-table">
            <thead>
              <tr>
                <th>メンバー</th>
                <th>アカウント</th>
                <th>最終投稿</th>
                <th>投稿内容</th>
                <th>リンク</th>
              </tr>
            </thead>
            <tbody id="memberXTableBody"></tbody>
          </table>
        </div>
      </section>

      <section class="panel reveal">
        <div class="panel-head">
          <h2>Realtime Timeline</h2>
          <p>公演・ニュース・SNSを混在表示</p>
        </div>
        <div id="timelineList" class="timeline-list"></div>
      </section>
    </main>

    <template id="emptyStateTemplate">
      <article class="empty-state">
        <p>現在表示できるデータがありません。少し待ってから更新してください。</p>
      </article>
    </template>

    <script src="./config.js"></script>
    <script type="module" src="./app.js"></script>
  </body>
</html>
